jq '.resources[] | select(.type=="Microsoft.Network/networkSecurityGroups")| del(.type, .apiVersion, .properties.resourceGuid, .properties.ProvisioningState, .properties.defaultSecurityRules, .properties.securityRules[].properties.provisioningState, .properties.securityRules[].etag, .properties.provisioningState)| [.properties.securityRules[]] as $security_rule| {resource: [{ azurerm_network_security_group: [{name: [{location, $security_rule}]}]}]}' nsg.json > tmp; json2hcl < tmp > tmp1